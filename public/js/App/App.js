import Level from './Level';
class App {
    constructor(id) {
        this.inventory = {};
        // Viewport
        this.vp = {
            h: 7,
            w: 7,
            hPad: 3,
            vPad: 3,
            blockSize: 32
        };
        this.redraw = () => {
            requestAnimationFrame(this.redraw);
            this.context.fillStyle = 'blue';
            this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);
            // TODO
            // this.gui.draw(this.context)
            // the GUI
            this.currentMap.draw(this.context);
        };
        // Canvas
        const canvas = document.getElementById(id);
        this.canvas = canvas;
        this.canvas.height = this.vp.blockSize * this.vp.h;
        this.canvas.width = this.vp.blockSize * this.vp.w;
        this.canvas.style.border = '4px solid blue';
        // Context
        const context = canvas.getContext('2d');
        this.context = context;
        const level1Grid = [
            [' ', ' ', 'X', 'X', 'X', 'X', ' ', ' '],
            [' ', 'P', ' ', 'X', ' ', ' ', ' ', ' '],
            ['X', ' ', ' ', 'X', ' ', 'U', ' ', 'X'],
            ['X', ' ', 'X', 'X', ' ', ' ', ' ', 'X'],
            ['X', ' ', 'X', 'X', 'X', 'D', 'X', 'X'],
            ['X', ' ', 'X', 'X', 'X', ' ', 'X', 'X'],
            ['X', ' ', ' ', 'K', ' ', ' ', ' ', 'X'],
            ['X', ' ', 'X', 'X', 'X', 'X', ' ', ' '],
            ['X', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
            ['X', 'X', 'X', 'X', 'X', 'X', 'X', ' '],
            ['X', '2', ' ', 'X', 'X', 'X', 'X', ' '],
            ['X', ' ', ' ', 'X', 'X', 'X', 'X', ' '],
            ['X', ' ', ' ', 'X', 'X', 'X', 'X', ' '],
            ['X', 'X', ' ', ' ', ' ', ' ', ' ', ' '],
        ];
        const l1 = new Level({
            name: 'L1',
            grid: level1Grid,
            vp: this.vp
        });
        this.currentMap = l1;
        this.canvas.addEventListener('keydown', this.createUserEvents(this.currentMap));
        this.redraw();
    }
    createUserEvents(currentMap) {
        return (e) => {
            const { key } = e;
            let direction = [0, 0];
            switch (key) {
                case 'ArrowUp':
                case 'w':
                    direction = [0, -1];
                    break;
                case 'ArrowDown':
                case 's':
                    direction = [0, 1];
                    break;
                case 'ArrowRight':
                case 'd':
                    direction = [1, 0];
                    break;
                case 'ArrowLeft':
                case 'a':
                    direction = [-1, 0];
                    break;
            }
            currentMap.moveCharacter('P', direction);
        };
    }
}
export default App;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXBwLmpzIiwic291cmNlUm9vdCI6Ii4uL3NyYy8iLCJzb3VyY2VzIjpbIkFwcC9BcHAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxLQUFLLE1BQU0sU0FBUyxDQUFBO0FBRTNCLE1BQU0sR0FBRztJQWdCTCxZQUFZLEVBQVU7UUFYdEIsY0FBUyxHQUFjLEVBQUUsQ0FBQTtRQUV6QixXQUFXO1FBQ1gsT0FBRSxHQUFPO1lBQ0wsQ0FBQyxFQUFFLENBQUM7WUFDSixDQUFDLEVBQUUsQ0FBQztZQUNKLElBQUksRUFBRSxDQUFDO1lBQ1AsSUFBSSxFQUFFLENBQUM7WUFDUCxTQUFTLEVBQUUsRUFBRTtTQUNoQixDQUFBO1FBeUNELFdBQU0sR0FBRyxHQUFHLEVBQUU7WUFDVixxQkFBcUIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7WUFDbEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFBO1lBQy9CLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUVsRSxPQUFPO1lBQ1AsOEJBQThCO1lBQzlCLFVBQVU7WUFFVixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDdEMsQ0FBQyxDQUFBO1FBaERHLFNBQVM7UUFDVCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBc0IsQ0FBQTtRQUMvRCxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtRQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUNsRCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUNqRCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsZ0JBQWdCLENBQUE7UUFFM0MsVUFBVTtRQUNWLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUE2QixDQUFBO1FBQ25FLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBRXRCLE1BQU0sVUFBVSxHQUFTO1lBQ3JCLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN4QyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7WUFDeEMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1lBQ3hDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN4QyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7WUFDeEMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1lBQ3hDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN4QyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7WUFDeEMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1lBQ3hDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN4QyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7WUFDeEMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1lBQ3hDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN4QyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7U0FDM0MsQ0FBQTtRQUVELE1BQU0sRUFBRSxHQUFHLElBQUksS0FBSyxDQUFDO1lBQ2pCLElBQUksRUFBRSxJQUFJO1lBQ1YsSUFBSSxFQUFFLFVBQVU7WUFDaEIsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFO1NBQ2QsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUE7UUFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFBO1FBQy9FLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQTtJQUNqQixDQUFDO0lBY0QsZ0JBQWdCLENBQUMsVUFBaUI7UUFDOUIsT0FBTyxDQUFDLENBQWdCLEVBQUUsRUFBRTtZQUN4QixNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFBO1lBQ2pCLElBQUksU0FBUyxHQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO1lBRTFCLFFBQVEsR0FBRyxFQUFFO2dCQUNULEtBQUssU0FBUyxDQUFDO2dCQUNmLEtBQUssR0FBRztvQkFDSixTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtvQkFDbkIsTUFBSztnQkFDVCxLQUFLLFdBQVcsQ0FBQztnQkFDakIsS0FBSyxHQUFHO29CQUNKLFNBQVMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtvQkFDbEIsTUFBSztnQkFDVCxLQUFLLFlBQVksQ0FBQztnQkFDbEIsS0FBSyxHQUFHO29CQUNKLFNBQVMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtvQkFDbEIsTUFBSztnQkFDVCxLQUFLLFdBQVcsQ0FBQztnQkFDakIsS0FBSyxHQUFHO29CQUNKLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO29CQUNuQixNQUFLO2FBQ1o7WUFFRCxVQUFVLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQTtRQUM1QyxDQUFDLENBQUE7SUFDTCxDQUFDO0NBQ0o7QUFFRCxlQUFlLEdBQUcsQ0FBQSJ9